<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Iván López | Desarrollador Multiplataforma</title>
    <meta name="description" content="Portfolio profesional de Iván López Benítez, desarrollador multiplataforma especializado en crear soluciones digitales eficientes y atractivas.">
    <meta name="author" content="Iván López">

    <!-- Iconos -->
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Estilos -->
    <style>
        /* --- Fuentes --- */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        /* ---
        Tokens de Diseño (Material Design 3)
        --- */
        :root {
            /* Tema Claro */
            --md-sys-color-primary-light: #005ac1;
            --md-sys-color-on-primary-light: #ffffff;
            --md-sys-color-primary-container-light: #d8e2ff;
            --md-sys-color-on-primary-container-light: #001a41;
            --md-sys-color-secondary-light: #575e71;
            --md-sys-color-on-secondary-light: #ffffff;
            --md-sys-color-background-light: #fefbff;
            --md-sys-color-on-background-light: #1b1b1f;
            --md-sys-color-surface-light: #fefbff;
            --md-sys-color-surface-container-highest-light: #e3e2e6;
            --md-sys-color-on-surface-light: #1b1b1f;
            --md-sys-color-surface-variant-light: #e1e2ec;
            --md-sys-color-on-surface-variant-light: #44474f;
            --md-sys-color-outline-light: #74777f;
            --md-sys-color-shadow-light: #000000;
            --md-sys-color-ripple-light: #005ac1;


            /* Tema Oscuro */
            --md-sys-color-primary-dark: #adc6ff;
            --md-sys-color-on-primary-dark: #002e69;
            --md-sys-color-primary-container-dark: #004494;
            --md-sys-color-on-primary-container-dark: #d8e2ff;
            --md-sys-color-secondary-dark: #bfc6dc;
            --md-sys-color-on-secondary-dark: #283041;
            --md-sys-color-background-dark: #1b1b1f;
            --md-sys-color-on-background-dark: #e3e2e6;
            --md-sys-color-surface-dark: #1b1b1f;
            --md-sys-color-surface-container-highest-dark: #33353a;
            --md-sys-color-on-surface-dark: #e3e2e6;
            --md-sys-color-surface-variant-dark: #44474f;
            --md-sys-color-on-surface-variant-dark: #c4c6d0;
            --md-sys-color-outline-dark: #8e9099;
            --md-sys-color-shadow-dark: #000000;
            --md-sys-color-ripple-dark: #adc6ff;


            /* Tipografía y Forma */
            --md-sys-typescale-font-family: 'Inter', sans-serif;
            --md-sys-shape-corner-small: 4px;
            --md-sys-shape-corner-medium: 8px;
            --md-sys-shape-corner-large: 16px;
            --md-sys-shape-corner-full: 100px;
            --transition-speed: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-motion: 0.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* --- Aplicación de Tokens --- */
        :root {
            --primary-color: var(--md-sys-color-primary-light);
            --on-primary-color: var(--md-sys-color-on-primary-light);
            --primary-container-color: var(--md-sys-color-primary-container-light);
            --on-primary-container-color: var(--md-sys-color-on-primary-container-light);
            --background-color: var(--md-sys-color-background-light);
            --surface-color: var(--md-sys-color-surface-light);
            --surface-container-high: var(--md-sys-color-surface-container-highest-light);
            --on-surface-color: var(--md-sys-color-on-surface-light);
            --on-surface-variant-color: var(--md-sys-color-on-surface-variant-light);
            --outline-color: var(--md-sys-color-outline-light);
            --shadow-color: var(--md-sys-color-shadow-light);
            --ripple-color: var(--md-sys-color-ripple-light);
        }
        
        body.dark-theme {
            --primary-color: var(--md-sys-color-primary-dark);
            --on-primary-color: var(--md-sys-color-on-primary-dark);
            --primary-container-color: var(--md-sys-color-primary-container-dark);
            --on-primary-container-color: var(--md-sys-color-on-primary-container-dark);
            --background-color: var(--md-sys-color-background-dark);
            --surface-color: var(--md-sys-color-surface-dark);
            --surface-container-high: var(--md-sys-color-surface-container-highest-dark);
            --on-surface-color: var(--md-sys-color-on-surface-dark);
            --on-surface-variant-color: var(--md-sys-color-on-surface-variant-dark);
            --outline-color: var(--md-sys-color-outline-dark);
            --shadow-color: var(--md-sys-color-shadow-dark);
            --ripple-color: var(--md-sys-color-ripple-dark);
        }

        /* --- Reset y Estilos Globales --- */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 6rem;
        }

        body {
            font-family: var(--md-sys-typescale-font-family);
            background-color: var(--background-color);
            color: var(--on-surface-variant-color);
            line-height: 1.6;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
        }
        
        section {
            padding: 7rem 0;
            overflow-x: hidden;
        }
        
        /* --- Tipografía MD3 --- */
        h1, h2, h3, .type-display, .type-headline, .type-title {
            color: var(--on-surface-color);
            font-weight: 700;
            line-height: 1.2;
            transition: color var(--transition-speed);
        }
        
        .type-display { font-size: clamp(2.8rem, 5vw, 4.5rem); font-weight: 600; }
        .type-headline { font-size: clamp(1.5rem, 3vw, 2rem); font-weight: 500; color: var(--on-surface-variant-color); }
        .type-title-large { font-size: 1.6rem; margin-bottom: 2rem; text-align: center; }
        .type-title-medium { font-size: 1.25rem; }

        a { color: var(--primary-color); text-decoration: none; transition: color var(--transition-speed); }

        /* --- Header / Top App Bar --- */
        .header {
            background-color: var(--surface-color);
            position: fixed;
            width: 100%;
            top: 0; left: 0;
            z-index: 100;
            transition: background-color var(--transition-speed), border-bottom-color var(--transition-speed);
            border-bottom: 1px solid transparent;
        }
        
        .header.scrolled {
            background-color: hsla(from var(--surface-color) h s l / 0.85);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--outline-color);
        }

        .nav { display: flex; justify-content: space-between; align-items: center; height: 5rem; }
        .nav__menu-container { display: flex; align-items: center; gap: 1rem; }
        .nav__logo { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); }
        .nav__list { list-style: none; display: flex; gap: 2.5rem; }
        .nav__link { font-weight: 600; color: var(--on-surface-color); position: relative; padding: 0.5rem 0; }
        .nav__link::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px; background-color: var(--primary-color); transform: scaleX(0); transform-origin: bottom right; transition: transform var(--transition-speed); }
        .nav__link:hover::after { transform: scaleX(1); transform-origin: bottom left; }
        .nav__toggle { display: none; }

        /* --- Botón de Tema (Icon Button) & Ripple --- */
        .icon-button {
            background: none; border: none; cursor: pointer; color: var(--on-surface-variant-color);
            display: flex; align-items: center; justify-content: center;
            width: 40px; height: 40px; border-radius: var(--md-sys-shape-corner-full);
            position: relative; overflow: hidden;
            transition: background-color var(--transition-speed);
        }
        .icon-button:hover { background-color: hsla(from var(--on-surface-color) h s l / 0.08); }
        .theme-toggle .feather { width: 24px; height: 24px; }
        .theme-toggle .icon-sun { display: none; }
        body.dark-theme .theme-toggle .icon-sun { display: block; }
        body.dark-theme .theme-toggle .icon-moon { display: none; }
        
        /* --- Sección Hero --- */
        .hero { display: flex; align-items: center; justify-content: center; text-align: center; min-height: 100vh; padding-top: 5rem; }
        .hero .type-display { margin-bottom: 1rem; }
        .hero .type-headline { margin-bottom: 2.5rem; max-width: 600px; margin-inline: auto; }
        .hero .type-headline span { color: var(--primary-color); font-weight: 600; }
        
        /* --- Botón MD3 (Filled & Outlined Button) --- */
        .btn {
            display: inline-flex; align-items: center; justify-content: center;
            padding: 0.75rem 2rem; border-radius: var(--md-sys-shape-corner-full);
            font-weight: 600; font-size: 1rem;
            border: 1px solid transparent; cursor: pointer; text-decoration: none;
            position: relative; overflow: hidden;
            box-shadow: 0 1px 3px 0 hsla(from var(--shadow-color) h s l / 0.2), 0 1px 2px 0 hsla(from var(--shadow-color) h s l / 0.1);
            transition: box-shadow var(--transition-speed), background-color var(--transition-speed), transform var(--transition-speed), border-color var(--transition-speed);
            background-color: var(--primary-color); color: var(--on-primary-color);
        }
        .btn:hover { box-shadow: 0 4px 6px -1px hsla(from var(--shadow-color) h s l / 0.2), 0 2px 4px -1px hsla(from var(--shadow-color) h s l / 0.1); transform: translateY(-2px); }
        .btn:active { transform: translateY(0); }
        .btn--secondary { background-color: transparent; color: var(--primary-color); border-color: var(--outline-color); box-shadow: none; }
        .btn--secondary:hover { background-color: hsla(from var(--primary-color) h s l / 0.08); border-color: var(--primary-color); box-shadow: none; }
        
        /* --- Efecto Ripple MD3 --- */
        .ripple { position: absolute; border-radius: 50%; background-color: var(--ripple-color); transform: scale(0); animation: ripple-effect 0.6s linear; opacity: 0.2; }
        @keyframes ripple-effect { to { transform: scale(4); opacity: 0; } }

        /* --- Sección "Sobre Mí" --- */
        .about__container { display: grid; grid-template-columns: 1fr 2fr; align-items: center; gap: 4rem; }
        .about__img { width: 300px; height: 300px; border-radius: 50%; object-fit: cover; border: 6px solid var(--primary-container-color); padding: 4px; justify-self: center; transition: border-color var(--transition-speed); }
        .about__text p { max-width: 65ch; }

        /* --- Sección "Proyectos" --- */
        #projects { background-color: var(--surface-container-high); transition: background-color var(--transition-speed); }
        .projects__grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 2rem; max-height: 550px; overflow: hidden; transition: max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1); }
        .projects__grid.is-expanded { max-height: 3000px; }
        .project-card { background: var(--surface-color); border-radius: var(--md-sys-shape-corner-large); border: 1px solid var(--outline-color); overflow: hidden; display: flex; flex-direction: column; position: relative; transition: transform var(--transition-speed), box-shadow var(--transition-speed), border-color var(--transition-speed); }
        .project-card:hover { transform: translateY(-8px); box-shadow: 0 10px 15px -3px hsla(from var(--shadow-color) h s l / 0.1), 0 4px 6px -2px hsla(from var(--shadow-color) h s l / 0.05); border-color: var(--primary-color); }
        .project-card__img { width: 100%; height: 220px; object-fit: cover; border-bottom: 1px solid var(--outline-color); }
        .project-card__content { padding: 1.5rem; flex-grow: 1; display: flex; flex-direction: column; }
        .project-card__tags { margin-bottom: 1rem; display: flex; flex-wrap: wrap; gap: 0.5rem; }
        .project-card__tag { background-color: var(--primary-container-color); color: var(--on-primary-container-color); padding: 0.3rem 0.85rem; border-radius: var(--md-sys-shape-corner-medium); font-size: 0.85rem; font-weight: 600; }
        .project-card__title { margin-bottom: 0.5rem; font-size: 1.5rem; color: var(--on-surface-color); }
        .project-card__description { margin-bottom: 1.5rem; flex-grow: 1; font-size: 1rem; color: var(--on-surface-variant-color); }
        .project-card__links a { font-weight: 600; margin-right: 1.5rem; display: inline-flex; align-items: center; gap: 0.25rem; }
        .projects__expand-container { margin-top: 2.5rem; text-align: center; display: none; }
        
        /* --- Sección "Contacto" --- */
        .contact__container { max-width: 700px; margin: 0 auto; text-align: center; }
        .contact__container p { margin-bottom: 2.5rem; }
        .contact__form { display: grid; gap: 1.5rem; }
        .contact__form .btn { justify-self: center; width: 200px; }
        .form-group { position: relative; }
        .form-input { width: 100%; padding: 1rem; border: 1px solid var(--outline-color); border-radius: var(--md-sys-shape-corner-small); font-family: var(--md-sys-typescale-font-family); font-size: 1rem; background: transparent; color: var(--on-surface-color); transition: border-color var(--transition-speed); }
        .form-input::placeholder { color: transparent; }
        .form-label { position: absolute; top: 1rem; left: 1rem; color: var(--on-surface-variant-color); pointer-events: none; transition: all var(--transition-speed); }
        .form-input:focus, .form-input:not(:placeholder-shown) { outline: 2px solid transparent; border-color: var(--primary-color); }
        .form-input:focus ~ .form-label, .form-input:not(:placeholder-shown) ~ .form-label { top: -0.6rem; left: 0.8rem; font-size: 0.8rem; color: var(--primary-color); background-color: var(--background-color); padding: 0 0.25rem; }
        .form-status { margin-top: 1rem; font-weight: 600; }

        /* --- Footer --- */
        .footer { background: var(--surface-container-high); color: var(--on-surface-variant-color); text-align: center; padding: 3rem 0; transition: background-color var(--transition-speed), color var(--transition-speed); border-top: 1px solid var(--outline-color); }

        /* --- Animaciones de Scroll --- */
        .animate-on-scroll { opacity: 0; transform: translateY(30px); transition: opacity var(--transition-motion), transform var(--transition-motion); }
        .animate-on-scroll.is-visible { opacity: 1; transform: translateY(0); }

        /* --- Responsive Design (Media Queries) --- */
        @media (max-width: 768px) {
             h2.type-title-large { font-size: 1.5rem; }
            .nav__list { position: fixed; top: 5rem; right: -100%; width: 100%; height: calc(100vh - 5rem); background-color: var(--surface-color); flex-direction: column; align-items: center; justify-content: center; transition: right var(--transition-speed); gap: 2rem; }
            .nav__list.active { right: 0; }
            .nav__link { font-size: 1.5rem; }
            .nav__toggle { display: flex; }
            .about__container { grid-template-columns: 1fr; text-align: center; gap: 2rem; }
            .about__img { width: 220px; height: 220px; margin-bottom: 1rem; }
        }
    </style>
</head>
<body>

    <header class="header" id="header">
        <div class="container nav">
            <a href="#" class="nav__logo">ILopBen.dev</a>
            
            <div class="nav__menu-container">
                <nav>
                    <ul class="nav__list" id="nav-list">
                        <li><a href="#about" class="nav__link">Sobre mí</a></li>
                        <li><a href="#projects" class="nav__link">Proyectos</a></li>
                        <li><a href="#contact" class="nav__link">Contacto</a></li>
                    </ul>
                </nav>

                <button class="theme-toggle icon-button" id="theme-toggle" aria-label="Cambiar tema" data-ripple>
                    <i data-feather="moon" class="icon-moon"></i>
                    <i data-feather="sun" class="icon-sun"></i>
                </button>

                <button class="nav__toggle icon-button" id="nav-toggle" aria-label="Menú" data-ripple>
                    <i data-feather="menu"></i>
                </button>
            </div>
        </div>
    </header>

    <main>
        <section id="hero" class="hero">
            <div class="container">
                <h1 class="type-display animate-on-scroll">Hola, soy Iván</h1>
                <p class="type-headline animate-on-scroll" style="transition-delay: 100ms;">Desarrollador Multiplataforma <span>Full Stack</span></p>
                <a href="#projects" class="btn animate-on-scroll" style="transition-delay: 200ms;" data-ripple>Ver mis proyectos</a>
            </div>
        </section>

        <section id="about">
            <div class="container">
                <h2 class="type-title-large animate-on-scroll">Sobre Mí</h2>
                <div class="about__container">
                    <img src="img/hombreFalso.png" alt="Foto de perfil de Iván López" class="about__img animate-on-scroll">
                    <div class="about__text animate-on-scroll" style="transition-delay: 100ms;">
                         <p>
                             ¡Bienvenido a mi rincón digital! Soy un apasionado desarrollador multiplataforma enfocado en construir soluciones tecnológicas que sean tanto funcionales como visualmente atractivas.
                             <br><br>
                             Mi especialidad es el desarrollo con tecnologías como Java, Python, C# o C++. Me encanta transformar ideas complejas en interfaces de usuario intuitivas y eficientes. Estoy siempre en busca de nuevos retos para seguir aprendiendo y mejorando mis habilidades.
                         </p>
                    </div>
                </div>
            </div>
        </section>

        <section id="projects">
            <div class="container">
                <h2 class="type-title-large animate-on-scroll">Mis Proyectos</h2>
                <div class="projects__grid">

                    <article class="project-card animate-on-scroll" data-ripple>
                        <img src="img/cuentaPersonas.png" alt="Imagen del Proyecto Cuenta Personas" class="project-card__img">
                        <div class="project-card__content">
                            <div class="project-card__tags">
                                <span class="project-card__tag">IA</span>
                                <span class="project-card__tag">Web</span>
                                <span class="project-card__tag">3D</span>
                            </div>
                            <h3 class="project-card__title">Cuenta Personas</h3>
                            <p class="project-card__description">
                                Aplicación de gestión de personas que permite a los usuarios crear, organizar y buscar información de manera eficiente. Utiliza tecnologías web modernas para una experiencia fluida.
                            </p>
                            <div class="project-card__links">
                                <a href="https://ivix542.github.io/Cuenta-Personas/" target="_blank">Probar <i data-feather="arrow-up-right" width="16"></i></a>
                                <a href="https://github.com/IVIX542/Cuenta-Personas" target="_blank">Código <i data-feather="github" width="16"></i></a>
                            </div>
                        </div>
                    </article>

                    <article class="project-card animate-on-scroll" data-ripple>
                        <img src="img/pomodoroWeb.png" alt="Imagen del Proyecto Pomodoro Web" class="project-card__img">
                        <div class="project-card__content">
                             <div class="project-card__tags">
                                 <span class="project-card__tag">IA</span>
                                 <span class="project-card__tag">Web</span>
                                 <span class="project-card__tag">MD3</span>
                             </div>
                            <h3 class="project-card__title">Pomodoro Web</h3>
                            <p class="project-card__description">
                                Una breve descripción del proyecto. Explica su propósito, los desafíos que enfrentaste y las tecnologías que utilizaste.
                            </p>
                            <div class="project-card__links">
                                <a href="https://ivix542.github.io/Pomodoro-Web/" target="_blank">Probar <i data-feather="arrow-up-right" width="16"></i></a>
                                <a href="https://github.com/IVIX542/Pomodoro-Web" target="_blank">Código <i data-feather="github" width="16"></i></a>
                                <a href="https://ivix542.github.io/DocumentacionPomodoroWeb/" target="_blank">Proceso <i data-feather="book-open" width="16"></i></a>
                            </div>
                        </div>
                    </article>

                    <article class="project-card animate-on-scroll" data-ripple>
                        <img src="https://placehold.co/600x440/d8e2ff/001a41?text=Proyecto+3" alt="Imagen del Proyecto 3" class="project-card__img">
                        <div class="project-card__content">
                            <div class="project-card__tags">
                                <span class="project-card__tag">React</span>
                                <span class="project-card__tag">CSS Modules</span>
                                <span class="project-card__tag">Vite</span>
                            </div>
                            <h3 class="project-card__title">Nombre del Proyecto 3</h3>
                            <p class="project-card__description">
                                Una breve descripción del proyecto. Explica su propósito, los desafíos que enfrentaste y las tecnologías que utilizaste.
                            </p>
                            <div class="project-card__links">
                                <a href="#" target="_blank">Probar <i data-feather="arrow-up-right" width="16"></i></a>
                                <a href="#" target="_blank">Código <i data-feather="github" width="16"></i></a>
                                <a href="#" target="_blank">Proceso <i data-feather="book-open" width="16"></i></a>
                            </div>
                        </div>
                    </article>
                    
                    <article class="project-card animate-on-scroll" data-ripple>
                        <img src="https://placehold.co/600x440/d8e2ff/001a41?text=Proyecto+4" alt="Imagen del Proyecto 4" class="project-card__img">
                        <div class="project-card__content">
                            <div class="project-card__tags">
                                <span class="project-card__tag">Vue.js</span>
                                <span class="project-card__tag">Firebase</span>
                            </div>
                            <h3 class="project-card__title">Nombre del Proyecto 4</h3>
                            <p class="project-card__description">
                                Una breve descripción del proyecto. Explica su propósito, los desafíos que enfrentaste y las tecnologías que utilizaste.
                            </p>
                            <div class="project-card__links">
                                <a href="#" target="_blank">Probar <i data-feather="arrow-up-right" width="16"></i></a>
                                <a href="#" target="_blank">Código <i data-feather="github" width="16"></i></a>
                            </div>
                        </div>
                    </article>

                </div>
                <div class="projects__expand-container animate-on-scroll">
                    <button class="btn btn--secondary" id="expand-projects-btn" data-ripple>Ver más</button>
                </div>
            </div>
        </section>

        <section id="contact">
            <div class="container contact__container">
                <h2 class="type-title-large animate-on-scroll">Contacto</h2>
                <p class="animate-on-scroll">¿Interesado en colaborar o tienes alguna pregunta? No dudes en contactarme. Rellena el formulario y te responderé lo antes posible.</p>
                
                <form id="contact-form" class="contact__form animate-on-scroll" action="https://formspree.io/f/xeorvrgw" method="POST">
                    <div class="form-group">
                        <input type="text" id="name" name="name" class="form-input" placeholder="Nombre" required>
                        <label for="name" class="form-label">Nombre</label>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" name="email" class="form-input" placeholder="Email" required>
                        <label for="email" class="form-label">Email</label>
                    </div>
                    <div class="form-group">
                        <textarea id="message" name="message" rows="5" class="form-input" placeholder="Mensaje" required></textarea>
                        <label for="message" class="form-label">Mensaje</label>
                    </div>
                    <button type="submit" class="btn" data-ripple>Enviar Mensaje</button>
                </form>
                <p id="form-status" class="form-status"></p>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
             <p>&copy; 2025 Iván López Benítez. Todos los derechos reservados.</p>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            feather.replace();

            // --- Ripple Effect ---
            function createRipple(event) {
                const button = event.currentTarget;
                const circle = document.createElement("span");
                const diameter = Math.max(button.clientWidth, button.clientHeight);
                const radius = diameter / 2;

                circle.style.width = circle.style.height = `${diameter}px`;
                circle.style.left = `${event.clientX - button.offsetLeft - radius}px`;
                circle.style.top = `${event.clientY - button.offsetTop - radius}px`;
                circle.classList.add("ripple");

                const ripple = button.getElementsByClassName("ripple")[0];
                if (ripple) {
                    ripple.remove();
                }
                button.appendChild(circle);
            }

            const rippleElements = document.querySelectorAll("[data-ripple]");
            rippleElements.forEach(el => {
                el.addEventListener("click", createRipple);
            });

            // --- Menú de Navegación Móvil ---
            const navToggle = document.getElementById('nav-toggle');
            const navList = document.getElementById('nav-list');
            const navLinks = document.querySelectorAll('.nav__link');

            navToggle.addEventListener('click', () => {
                navList.classList.toggle('active');
            });

            navLinks.forEach(link => {
                link.addEventListener('click', () => {
                    navList.classList.remove('active');
                });
            });

            // --- Lógica del Tema Claro/Oscuro ---
            const themeToggle = document.getElementById('theme-toggle');
            const applyTheme = (theme) => {
                document.body.classList.toggle('dark-theme', theme === 'dark-theme');
            };
            
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            applyTheme(savedTheme || (prefersDark ? 'dark-theme' : 'light-theme'));

            themeToggle.addEventListener('click', () => {
                const isDark = document.body.classList.toggle('dark-theme');
                localStorage.setItem('theme', isDark ? 'dark-theme' : 'light-theme');
            });

            // --- Lógica del Formulario de Contacto ---
            const form = document.getElementById('contact-form');
            if(form) {
                async function handleSubmit(event) {
                    event.preventDefault();
                    const status = document.getElementById("form-status");
                    const data = new FormData(event.target);
                    try {
                        const response = await fetch(event.target.action, {
                            method: form.method,
                            body: data,
                            headers: { 'Accept': 'application/json' }
                        });
                        if (response.ok) {
                            status.textContent = "¡Gracias por tu mensaje! Me pondré en contacto contigo pronto.";
                            status.style.color = 'var(--primary-color)';
                            form.reset();
                        } else {
                            throw new Error('Network response was not ok.');
                        }
                    } catch (error) {
                        status.textContent = "Oops! Hubo un problema al enviar tu formulario.";
                        status.style.color = '#d93025';
                    }
                }
                form.addEventListener("submit", handleSubmit);
            }

            // --- Animación al hacer Scroll (Intersection Observer) ---
            const animatedElements = document.querySelectorAll('.animate-on-scroll');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        // Aplica un retraso escalonado a cada elemento
                        entry.target.style.transitionDelay = `${index * 100}ms`;
                        entry.target.classList.add('is-visible');
                    }
                });
            }, {
                threshold: 0.1
            });
            animatedElements.forEach(el => observer.observe(el));
            
            // --- Header translúcido al hacer scroll ---
            const header = document.getElementById('header');
            const scrollObserver = new IntersectionObserver(
                ([e]) => e.target.classList.toggle('scrolled', e.intersectionRatio < 1),
                { threshold: [1] }
            );
            scrollObserver.observe(header);

            // --- Lógica de Expansión de Proyectos ---
            const projectsGrid = document.querySelector('.projects__grid');
            const expandBtnContainer = document.querySelector('.projects__expand-container');

            if (projectsGrid && expandBtnContainer) {
                setTimeout(() => {
                    const isOverflowing = projectsGrid.scrollHeight > projectsGrid.clientHeight;

                    if (isOverflowing) {
                        const expandBtn = document.getElementById('expand-projects-btn');
                        expandBtnContainer.style.display = 'block';

                        expandBtn.addEventListener('click', () => {
                            projectsGrid.classList.toggle('is-expanded');
                            const isExpanded = projectsGrid.classList.contains('is-expanded');
                            expandBtn.textContent = isExpanded ? 'Ver menos' : 'Ver más';
                            if (!isExpanded) {
                                document.getElementById('projects').scrollIntoView({ behavior: 'smooth' });
                            }
                        });
                    } else {
                        projectsGrid.style.maxHeight = 'none';
                    }
                }, 100); 
            }
        });
    </script>
</body>
</html>

